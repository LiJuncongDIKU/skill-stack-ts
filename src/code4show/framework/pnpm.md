# pnpm
> 通过对 `Yarn` 的学习，了解了一个现代包管理工具需要具备的基本功能，实际上 `pnpm` 的发展历程也大同小异，但应该从最终表现的部分差异来看工具的区别

## Yarn 4 和 pnpm 10 共同点
+ 两者本质都是通过全局化包缓存来达到高复用的功能
+ 均默认禁止访问 幽灵依赖
+ 均对`monorepo`做了优化，即工作区
+ 各自有临时执行工具


## pnpm store 和 yarn PnP
+ `pnpm` 保留了虚拟 `node_modules`,对看源码更友好
+ `pnpm` 使用内容寻址存储 + 硬链接 + 符号链接的方式做指向
> 内容寻址是指`pnpm`的全局包会以哈希值标识，在项目中，使用硬链接的方式指向标识包。至于符合链接，则是解决包之间的依赖关系，用来构建虚拟依赖树以兼容
> `NodeJs` 嵌套寻找依赖包的逻辑，兼容性非常优秀。
+ 而`yarn PnP`使用的是路径映射的方式
> 把缓存路径和依赖关系都写到`.pnp.cjs` 中，运行时使用`PnP加载器`拦截`NodeJs`的路径处理。*直接拦截并替换路径，理论性能更好——路径映射解析可能在特定场景下略慢于 pnpm 的链接机制。*
+ `yarn PnP` 部分工具需要用到 `yarn的插件` 做兼容。
