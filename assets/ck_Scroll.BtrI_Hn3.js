import{a4 as h,b3 as $,Y as Ve,a5 as ee,am as ye,d as P,aj as Ee,$ as Se,q as g,r as Ie,c as y,ar as R,a6 as O,k as ue,aa as we,b as N,o as p,w as te,p as ne,h as M,u as r,at as ae,n as X,j as k,m as A,l as C,bt as xe,a2 as ke,as as Ae,ad as Ce,a3 as K,g as V,F as ce,e as de,_ as J,t as F,f as $e}from"./en_index.DvMw2WEb.js";import{a as Me,u as Fe,e as Pe,E as De}from"./ck_el-input.DvtV9625.js";import{v as le,M as re}from"./ck_mock.BVEyf0jU.js";import{U as w,I as L,C as me,_ as Te,i as Be,A as He,E as se,h as ze,B as Re,d as ie,t as Ke}from"./ck_aria.BfdkQAQk.js";import{a as Le}from"./ck_constants.Bm48iukD.js";import{g as Oe,a as Ue,E as oe}from"./ck_event.CifTRSAY.js";import"./ck__commonjsHelpers.Cpj98o6Y.js";const Ge=Ve({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.MAX_SAFE_INTEGER},min:{type:Number,default:Number.MIN_SAFE_INTEGER},modelValue:{type:[Number,null]},readonly:Boolean,disabled:Boolean,size:ye,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:s=>s===null||h(s)||["min","max"].includes(s),default:null},name:String,placeholder:String,precision:{type:Number,validator:s=>s>=0&&s===Number.parseInt(`${s}`,10)},validateEvent:{type:Boolean,default:!0},...Le(["ariaLabel"]),inputmode:{type:ee(String),default:void 0},align:{type:ee(String),default:"center"},disabledScientific:Boolean}),Ye={[me]:(s,o)=>o!==s,blur:s=>s instanceof FocusEvent,focus:s=>s instanceof FocusEvent,[L]:s=>h(s)||$(s),[w]:s=>h(s)||$(s)},je=P({name:"ElInputNumber"}),qe=P({...je,props:Ge,emits:Ye,setup(s,{expose:o,emit:u}){const n=s,{t:v}=Ee(),i=Se("input-number"),f=g(),a=Ie({currentValue:n.modelValue,userInput:null}),{formItem:_}=Me(),D=y(()=>h(n.modelValue)&&n.modelValue<=n.min),T=y(()=>h(n.modelValue)&&n.modelValue>=n.max),I=y(()=>{const e=Q(n.step);return R(n.precision)?Math.max(Q(n.modelValue),e):(e>n.precision,n.precision)}),E=y(()=>n.controls&&n.controlsPosition==="right"),U=Fe(),S=Pe(),x=y(()=>{if(a.userInput!==null)return a.userInput;let e=a.currentValue;if($(e))return"";if(h(e)){if(Number.isNaN(e))return"";R(n.precision)||(e=e.toFixed(n.precision))}return e}),G=(e,t)=>{if(R(t)&&(t=I.value),t===0)return Math.round(e);let l=String(e);const c=l.indexOf(".");if(c===-1||!l.replace(".","").split("")[c+t])return e;const H=l.length;return l.charAt(H-1)==="5"&&(l=`${l.slice(0,Math.max(0,H-1))}6`),Number.parseFloat(Number(l).toFixed(t))},Q=e=>{if($(e))return 0;const t=e.toString(),l=t.indexOf(".");let c=0;return l!==-1&&(c=t.length-l-1),c},Z=(e,t=1)=>h(e)?e>=Number.MAX_SAFE_INTEGER&&t===1||e<=Number.MIN_SAFE_INTEGER&&t===-1?e:G(e+n.step*t):a.currentValue,pe=e=>{const t=Oe(e),l=Ue(e);if(n.disabledScientific&&["e","E"].includes(l)){e.preventDefault();return}switch(t){case oe.up:{e.preventDefault(),Y();break}case oe.down:{e.preventDefault(),j();break}}},Y=()=>{if(n.readonly||S.value||T.value)return;const e=Number(x.value)||0,t=Z(e);B(t),u(L,a.currentValue),W()},j=()=>{if(n.readonly||S.value||D.value)return;const e=Number(x.value)||0,t=Z(e,-1);B(t),u(L,a.currentValue),W()},q=(e,t)=>{const{max:l,min:c,step:d,precision:b,stepStrictly:H,valueOnClear:z}=n;l<c&&Ke("InputNumber","min should not be greater than max.");let m=Number(e);if($(e)||Number.isNaN(m))return null;if(e===""){if(z===null)return null;m=Ae(z)?{min:c,max:l}[z]:z}return H&&(m=G(Math.round(m/d)*d,b),m!==e&&t&&u(w,m)),R(b)||(m=G(m,b)),(m>l||m<c)&&(m=m>l?l:c,t&&u(w,m)),m},B=(e,t=!0)=>{var l;const c=a.currentValue,d=q(e);if(!t){u(w,d);return}c===d&&e||(a.userInput=null,u(w,d),c!==d&&u(me,d,c),n.validateEvent&&((l=_?.validate)==null||l.call(_,"change").catch(b=>ie())),a.currentValue=d)},fe=e=>{a.userInput=e;const t=e===""?null:Number(e);u(L,t),B(t,!1)},ve=e=>{const t=e!==""?Number(e):"";(h(t)&&!Number.isNaN(t)||e==="")&&B(t),W(),a.userInput=null},be=()=>{var e,t;(t=(e=f.value)==null?void 0:e.focus)==null||t.call(e)},he=()=>{var e,t;(t=(e=f.value)==null?void 0:e.blur)==null||t.call(e)},Ne=e=>{u("focus",e)},_e=e=>{var t,l;a.userInput=null,a.currentValue===null&&((t=f.value)!=null&&t.input)&&(f.value.input.value=""),u("blur",e),n.validateEvent&&((l=_?.validate)==null||l.call(_,"blur").catch(c=>ie()))},W=()=>{a.currentValue!==n.modelValue&&(a.currentValue=n.modelValue)},ge=e=>{document.activeElement===e.target&&e.preventDefault()};return O(()=>n.modelValue,(e,t)=>{const l=q(e,!0);a.userInput===null&&l!==t&&(a.currentValue=l)},{immediate:!0}),O(()=>n.precision,()=>{a.currentValue=q(n.modelValue)}),ue(()=>{var e;const{min:t,max:l,modelValue:c}=n,d=(e=f.value)==null?void 0:e.input;if(d.setAttribute("role","spinbutton"),Number.isFinite(l)?d.setAttribute("aria-valuemax",String(l)):d.removeAttribute("aria-valuemax"),Number.isFinite(t)?d.setAttribute("aria-valuemin",String(t)):d.removeAttribute("aria-valuemin"),d.setAttribute("aria-valuenow",a.currentValue||a.currentValue===0?String(a.currentValue):""),d.setAttribute("aria-disabled",String(S.value)),!h(c)&&c!=null){let b=Number(c);Number.isNaN(b)&&(b=null),u(w,b)}d.addEventListener("wheel",ge,{passive:!1})}),we(()=>{var e,t;const l=(e=f.value)==null?void 0:e.input;l?.setAttribute("aria-valuenow",`${(t=a.currentValue)!=null?t:""}`)}),o({focus:be,blur:he}),(e,t)=>(p(),N("div",{class:X([r(i).b(),r(i).m(r(U)),r(i).is("disabled",r(S)),r(i).is("without-controls",!e.controls),r(i).is("controls-right",r(E)),r(i).is(e.align,!!e.align)]),onDragstart:ke(()=>{},["prevent"])},[e.controls?te((p(),N("span",{key:0,role:"button","aria-label":r(v)("el.inputNumber.decrease"),class:X([r(i).e("decrease"),r(i).is("disabled",r(D))]),onKeydown:ae(j,["enter"])},[k(e.$slots,"decrease-icon",{},()=>[M(r(se),null,{default:A(()=>[r(E)?(p(),C(r(Be),{key:0})):(p(),C(r(He),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[r(le),j]]):ne("v-if",!0),e.controls?te((p(),N("span",{key:1,role:"button","aria-label":r(v)("el.inputNumber.increase"),class:X([r(i).e("increase"),r(i).is("disabled",r(T))]),onKeydown:ae(Y,["enter"])},[k(e.$slots,"increase-icon",{},()=>[M(r(se),null,{default:A(()=>[r(E)?(p(),C(r(ze),{key:0})):(p(),C(r(Re),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[r(le),Y]]):ne("v-if",!0),M(r(De),{id:e.id,ref_key:"input",ref:f,type:"number",step:e.step,"model-value":r(x),placeholder:e.placeholder,readonly:e.readonly,disabled:r(S),size:r(U),max:e.max,min:e.min,name:e.name,"aria-label":e.ariaLabel,"validate-event":!1,inputmode:e.inputmode,onKeyup:pe,onBlur:_e,onFocus:Ne,onInput:fe,onChange:ve},xe({_:2},[e.$slots.prefix?{name:"prefix",fn:A(()=>[k(e.$slots,"prefix")])}:void 0,e.$slots.suffix?{name:"suffix",fn:A(()=>[k(e.$slots,"suffix")])}:void 0]),1032,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","inputmode"])],42,["onDragstart"]))}});var We=Te(qe,[["__file","input-number.vue"]]);const Xe=Ce(We),Je=P({__name:"VirtualScroll",props:{items:{type:Array,required:!0,default:()=>[]},itemHeight:{type:Number,default:50},containerHeight:{type:String,default:"500px"},preloadCount:{type:Number,default:5}},setup(s){const o=s,u=g(null),n=g(0),v=g(0),i=g(0),f=g(0),a=g(0),_=y(()=>o.items.length*o.itemHeight),D=y(()=>o.items.slice(i.value,f.value)),T=()=>{u.value&&(n.value=u.value.scrollTop,I())},I=()=>{if(!u.value)return;const E=u.value.clientHeight;v.value=Math.ceil(E/o.itemHeight),i.value=Math.max(0,Math.floor(n.value/o.itemHeight)-o.preloadCount),f.value=Math.min(o.items.length,i.value+v.value+2*o.preloadCount),a.value=i.value*o.itemHeight};return ue(()=>{I()}),O(()=>o.items.length,()=>{I()}),O(()=>u.value?.clientHeight,()=>{I()}),(E,U)=>(p(),N("div",{class:"virtual-scroll-container",ref_key:"containerRef",ref:u,onScroll:T,style:K({height:s.containerHeight})},[V("div",{class:"virtual-scroll-placeholder",style:K({height:`${_.value}px`})},null,4),V("div",{class:"virtual-scroll-content",style:K({transform:`translateY(${a.value}px)`})},[(p(!0),N(ce,null,de(D.value,(S,x)=>(p(),N("div",{key:x,style:K({height:`${s.itemHeight}px`}),class:"virtual-scroll-item"},[k(E.$slots,"default",{item:S},void 0,!0)],4))),128))],4)],36))}}),Qe=J(Je,[["__scopeId","data-v-3bd706a5"]]),Ze={class:"outer-cont"},et=P({__name:"ScrollItem",props:{index:{},label:{},desc:{}},setup(s){const o=s;return(u,n)=>(p(),N("div",Ze,F(o.index)+" |"+F(o.label)+" |"+F(o.desc),1))}}),tt=J(et,[["__scopeId","data-v-2ff2ee03"]]),nt={class:"bench-grid"},at={class:"left"},lt={class:"scroll-header"},rt={class:"scroll-wrap"},st={class:"right"},it={class:"item"},ot=P({__name:"Scroll",setup(s){const o=g(10),u=y(()=>{const v={};return v[`list|${o.value}`]=[{label:"@cname(3,4)",desc:"mock:@cword(5,10)","index|+1":1}],re.mock(v).list}),n=re.mock({"list|10000":[{label:"@cname",desc:"mock:@cword(5,10)"}]}).list.map((v,i)=>({...v,index:i+1}));return console.log(n),(v,i)=>{const f=Xe;return p(),N("div",nt,[V("div",at,[V("div",lt,[i[1]||(i[1]=V("div",{class:"title"},"直接渲染",-1)),M(f,{modelValue:o.value,"onUpdate:modelValue":i[0]||(i[0]=a=>o.value=a),min:1,step:100},null,8,["modelValue"])]),V("div",rt,[(p(!0),N(ce,null,de(u.value,a=>(p(),C(tt,{key:a.index,index:a.index,desc:a.desc,label:a.label},null,8,["index","desc","label"]))),128))])]),V("div",st,[i[2]||(i[2]=$e(" 虚拟滚动 ",-1)),M(Qe,{items:r(n)},{default:A(a=>[V("div",it,F(a.item.index)+":"+F(a.item.label),1)]),_:1},8,["items"])])])}}}),bt=J(ot,[["__scopeId","data-v-20d04ed8"]]);export{bt as default};
