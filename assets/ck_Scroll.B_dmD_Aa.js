import{a3 as g,aE as C,Y as ye,a4 as J,al as Ee,d as G,ah as Se,$ as Ie,r as V,g as we,c as E,aq as L,a5 as U,s as ce,a9 as ke,a as N,o as v,w as ne,l as le,p as M,u as r,as as ae,j as Q,e as x,m as $,k as A,bv as xe,a2 as $e,ar as Ae,ac as Ce,n as O,b as y,F as de,i as me,_ as Z,t as F,f as Me}from"./en_index.BB9GjpTt.js";import{a as Fe,u as Pe,e as Te,E as De}from"./ck_el-input.jVAUserM.js";import{v as re,M as se}from"./ck_mock.CzCuV5z9.js";import{U as w,I as K,C as pe,_ as Be,h as He,A as ze,E as ie,g as Re,B as Le,d as ue,t as Oe}from"./ck_aria.B9SjV4T1.js";import{a as Ke}from"./ck_constants.B8gjEQjn.js";import{g as Ue,a as Ge,E as oe}from"./ck_event.DUBg6JZW.js";import"./ck__commonjsHelpers.Cpj98o6Y.js";const Ye=ye({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.MAX_SAFE_INTEGER},min:{type:Number,default:Number.MIN_SAFE_INTEGER},modelValue:{type:[Number,null]},readonly:Boolean,disabled:{type:Boolean,default:void 0},size:Ee,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:J([String,Number,null]),validator:a=>a===null||g(a)||["min","max"].includes(a),default:null},name:String,placeholder:String,precision:{type:Number,validator:a=>a>=0&&a===Number.parseInt(`${a}`,10)},validateEvent:{type:Boolean,default:!0},...Ke(["ariaLabel"]),inputmode:{type:J(String),default:void 0},align:{type:J(String),default:"center"},disabledScientific:Boolean}),qe={[pe]:(a,i)=>i!==a,blur:a=>a instanceof FocusEvent,focus:a=>a instanceof FocusEvent,[K]:a=>g(a)||C(a),[w]:a=>g(a)||C(a)},We=["aria-label"],Xe=["aria-label"],je=G({name:"ElInputNumber",__name:"input-number",props:Ye,emits:qe,setup(a,{expose:i,emit:b}){const n=a,u=b,{t:m}=Se(),p=Ie("input-number"),o=V(),s=we({currentValue:n.modelValue,userInput:null}),{formItem:_}=Fe(),P=E(()=>g(n.modelValue)&&n.modelValue<=n.min),S=E(()=>g(n.modelValue)&&n.modelValue>=n.max),k=E(()=>{const e=ee(n.step);return L(n.precision)?Math.max(ee(n.modelValue),e):(e>n.precision,n.precision)}),T=E(()=>n.controls&&n.controlsPosition==="right"),D=Pe(),I=Te(),Y=E(()=>{if(s.userInput!==null)return s.userInput;let e=s.currentValue;if(C(e))return"";if(g(e)){if(Number.isNaN(e))return"";L(n.precision)||(e=e.toFixed(n.precision))}return e}),B=(e,t)=>{if(L(t)&&(t=k.value),t===0)return Math.round(e);let l=String(e);const c=l.indexOf(".");if(c===-1||!l.replace(".","").split("")[c+t])return e;const z=l.length;return l.charAt(z-1)==="5"&&(l=`${l.slice(0,Math.max(0,z-1))}6`),Number.parseFloat(Number(l).toFixed(t))},ee=e=>{if(C(e))return 0;const t=e.toString(),l=t.indexOf(".");let c=0;return l!==-1&&(c=t.length-l-1),c},te=(e,t=1)=>g(e)?e>=Number.MAX_SAFE_INTEGER&&t===1||e<=Number.MIN_SAFE_INTEGER&&t===-1?e:B(e+n.step*t):s.currentValue,fe=e=>{const t=Ue(e),l=Ge(e);if(n.disabledScientific&&["e","E"].includes(l)){e.preventDefault();return}switch(t){case oe.up:{e.preventDefault(),q();break}case oe.down:{e.preventDefault(),W();break}}},q=()=>{if(n.readonly||I.value||S.value)return;const e=Number(Y.value)||0,t=te(e);H(t),u(K,s.currentValue),j()},W=()=>{if(n.readonly||I.value||P.value)return;const e=Number(Y.value)||0,t=te(e,-1);H(t),u(K,s.currentValue),j()},X=(e,t)=>{const{max:l,min:c,step:d,precision:h,stepStrictly:z,valueOnClear:R}=n;l<c&&Oe("InputNumber","min should not be greater than max.");let f=Number(e);if(C(e)||Number.isNaN(f))return null;if(e===""){if(R===null)return null;f=Ae(R)?{min:c,max:l}[R]:R}return z&&(f=B(Math.round(B(f/d))*d,h),f!==e&&t&&u(w,f)),L(h)||(f=B(f,h)),(f>l||f<c)&&(f=f>l?l:c,t&&u(w,f)),f},H=(e,t=!0)=>{var l;const c=s.currentValue,d=X(e);if(!t){u(w,d);return}s.userInput=null,!(c===d&&e)&&(u(w,d),c!==d&&u(pe,d,c),n.validateEvent&&((l=_?.validate)==null||l.call(_,"change").catch(h=>ue())),s.currentValue=d)},ve=e=>{s.userInput=e;const t=e===""?null:Number(e);u(K,t),H(t,!1)},be=e=>{const t=e!==""?Number(e):"";(g(t)&&!Number.isNaN(t)||e==="")&&H(t),j(),s.userInput=null},he=()=>{var e,t;(t=(e=o.value)==null?void 0:e.focus)==null||t.call(e)},ge=()=>{var e,t;(t=(e=o.value)==null?void 0:e.blur)==null||t.call(e)},Ne=e=>{u("focus",e)},_e=e=>{var t,l;s.userInput=null,s.currentValue===null&&((t=o.value)!=null&&t.input)&&(o.value.input.value=""),u("blur",e),n.validateEvent&&((l=_?.validate)==null||l.call(_,"blur").catch(c=>ue()))},j=()=>{s.currentValue!==n.modelValue&&(s.currentValue=n.modelValue)},Ve=e=>{document.activeElement===e.target&&e.preventDefault()};return U(()=>n.modelValue,(e,t)=>{const l=X(e,!0);s.userInput===null&&l!==t&&(s.currentValue=l)},{immediate:!0}),U(()=>n.precision,()=>{s.currentValue=X(n.modelValue)}),ce(()=>{var e;const{min:t,max:l,modelValue:c}=n,d=(e=o.value)==null?void 0:e.input;if(d.setAttribute("role","spinbutton"),Number.isFinite(l)?d.setAttribute("aria-valuemax",String(l)):d.removeAttribute("aria-valuemax"),Number.isFinite(t)?d.setAttribute("aria-valuemin",String(t)):d.removeAttribute("aria-valuemin"),d.setAttribute("aria-valuenow",s.currentValue||s.currentValue===0?String(s.currentValue):""),d.setAttribute("aria-disabled",String(I.value)),!g(c)&&c!=null){let h=Number(c);Number.isNaN(h)&&(h=null),u(w,h)}d.addEventListener("wheel",Ve,{passive:!1})}),ke(()=>{var e,t;const l=(e=o.value)==null?void 0:e.input;l?.setAttribute("aria-valuenow",`${(t=s.currentValue)!=null?t:""}`)}),i({focus:he,blur:ge}),(e,t)=>(v(),N("div",{class:Q([r(p).b(),r(p).m(r(D)),r(p).is("disabled",r(I)),r(p).is("without-controls",!e.controls),r(p).is("controls-right",T.value),r(p).is(e.align,!!e.align)]),onDragstart:t[0]||(t[0]=$e(()=>{},["prevent"]))},[e.controls?ne((v(),N("span",{key:0,role:"button","aria-label":r(m)("el.inputNumber.decrease"),class:Q([r(p).e("decrease"),r(p).is("disabled",P.value)]),onKeydown:ae(W,["enter"])},[x(e.$slots,"decrease-icon",{},()=>[M(r(ie),null,{default:$(()=>[T.value?(v(),A(r(He),{key:0})):(v(),A(r(ze),{key:1}))]),_:1})])],42,We)),[[r(re),W]]):le("v-if",!0),e.controls?ne((v(),N("span",{key:1,role:"button","aria-label":r(m)("el.inputNumber.increase"),class:Q([r(p).e("increase"),r(p).is("disabled",S.value)]),onKeydown:ae(q,["enter"])},[x(e.$slots,"increase-icon",{},()=>[M(r(ie),null,{default:$(()=>[T.value?(v(),A(r(Re),{key:0})):(v(),A(r(Le),{key:1}))]),_:1})])],42,Xe)),[[r(re),q]]):le("v-if",!0),M(r(De),{id:e.id,ref_key:"input",ref:o,type:"number",step:e.step,"model-value":Y.value,placeholder:e.placeholder,readonly:e.readonly,disabled:r(I),size:r(D),max:e.max,min:e.min,name:e.name,"aria-label":e.ariaLabel,"validate-event":!1,inputmode:e.inputmode,onKeydown:fe,onBlur:_e,onFocus:Ne,onInput:ve,onChange:be},xe({_:2},[e.$slots.prefix?{name:"prefix",fn:$(()=>[x(e.$slots,"prefix")]),key:"0"}:void 0,e.$slots.suffix?{name:"suffix",fn:$(()=>[x(e.$slots,"suffix")]),key:"1"}:void 0]),1032,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","inputmode"])],34))}});var Je=Be(je,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const Qe=Ce(Je),Ze=G({__name:"VirtualScroll",props:{items:{type:Array,required:!0,default:()=>[]},itemHeight:{type:Number,default:50},containerHeight:{type:String,default:"500px"},preloadCount:{type:Number,default:5}},setup(a){const i=a,b=V(null),n=V(0),u=V(0),m=V(0),p=V(0),o=V(0),s=E(()=>i.items.length*i.itemHeight),_=E(()=>i.items.slice(m.value,p.value)),P=()=>{b.value&&(n.value=b.value.scrollTop,S())},S=()=>{if(!b.value)return;const k=b.value.clientHeight;u.value=Math.ceil(k/i.itemHeight),m.value=Math.max(0,Math.floor(n.value/i.itemHeight)-i.preloadCount),p.value=Math.min(i.items.length,m.value+u.value+2*i.preloadCount),o.value=m.value*i.itemHeight};return ce(()=>{S()}),U(()=>i.items.length,()=>{S()}),U(()=>b.value?.clientHeight,()=>{S()}),(k,T)=>(v(),N("div",{class:"virtual-scroll-container",ref_key:"containerRef",ref:b,onScroll:P,style:O({height:a.containerHeight})},[y("div",{class:"virtual-scroll-placeholder",style:O({height:`${s.value}px`})},null,4),y("div",{class:"virtual-scroll-content",style:O({transform:`translateY(${o.value}px)`})},[(v(!0),N(de,null,me(_.value,(D,I)=>(v(),N("div",{key:I,style:O({height:`${a.itemHeight}px`}),class:"virtual-scroll-item"},[x(k.$slots,"default",{item:D},void 0,!0)],4))),128))],4)],36))}}),et=Z(Ze,[["__scopeId","data-v-3bd706a5"]]),tt={class:"outer-cont"},nt=G({__name:"ScrollItem",props:{index:{},label:{},desc:{}},setup(a){const i=a;return(b,n)=>(v(),N("div",tt,F(i.index)+" |"+F(i.label)+" |"+F(i.desc),1))}}),lt=Z(nt,[["__scopeId","data-v-2ff2ee03"]]),at={class:"bench-grid"},rt={class:"left"},st={class:"scroll-header"},it={class:"scroll-wrap"},ut={class:"right"},ot={class:"item"},ct=G({__name:"Scroll",setup(a){const i=V(10),b=E(()=>{const u={};return u[`list|${i.value}`]=[{label:"@cname(3,4)",desc:"mock:@cword(5,10)","index|+1":1}],se.mock(u).list}),n=se.mock({"list|10000":[{label:"@cname",desc:"mock:@cword(5,10)"}]}).list.map((u,m)=>({...u,index:m+1}));return console.log(n),(u,m)=>{const p=Qe;return v(),N("div",at,[y("div",rt,[y("div",st,[m[1]||(m[1]=y("div",{class:"title"},"直接渲染",-1)),M(p,{modelValue:i.value,"onUpdate:modelValue":m[0]||(m[0]=o=>i.value=o),min:1,step:100},null,8,["modelValue"])]),y("div",it,[(v(!0),N(de,null,me(b.value,o=>(v(),A(lt,{key:o.index,index:o.index,desc:o.desc,label:o.label},null,8,["index","desc","label"]))),128))])]),y("div",ut,[m[2]||(m[2]=Me(" 虚拟滚动 ",-1)),M(et,{items:r(n)},{default:$(o=>[y("div",ot,F(o.item.index)+":"+F(o.item.label),1)]),_:1},8,["items"])])])}}}),gt=Z(ct,[["__scopeId","data-v-20d04ed8"]]);export{gt as default};
