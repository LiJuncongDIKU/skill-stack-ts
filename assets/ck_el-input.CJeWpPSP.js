import{a3 as Pe,ar as re,Y as at,a4 as T,al as nt,c as m,b2 as st,av as oe,Z as U,r as F,s as Be,a5 as K,a1 as Ae,aT as lt,aJ as it,u as o,ay as ee,au as Fe,a8 as M,d as rt,an as ut,at as dt,$ as ke,aE as ct,a as z,o as h,l as g,F as ue,b as O,j as E,e as Q,k as N,m as H,aa as D,am as Te,a2 as de,ap as ce,t as _,n as Me,X as pt,ab as Ve,ac as ft}from"./en_index.B5risS0d.js";import{a as vt,l as me,j as He,u as pe,c as mt}from"./ck_constants.CDyD9W8y.js";import{D as yt,U as te,o as fe,b as ht,u as bt,x as gt,_ as wt,V as xt,F as St,G as Et,E as j,I as ve,C as Le,d as Re}from"./ck_aria.BgMuClA1.js";let I;const It={height:"0",visibility:"hidden",overflow:yt()?"":"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Ct=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"],Oe=a=>{const n=Number.parseFloat(a);return Number.isNaN(n)?a:n};function zt(a){const n=window.getComputedStyle(a),c=n.getPropertyValue("box-sizing"),t=Number.parseFloat(n.getPropertyValue("padding-bottom"))+Number.parseFloat(n.getPropertyValue("padding-top")),s=Number.parseFloat(n.getPropertyValue("border-bottom-width"))+Number.parseFloat(n.getPropertyValue("border-top-width"));return{contextStyle:Ct.map(d=>[d,n.getPropertyValue(d)]),paddingSize:t,borderSize:s,boxSizing:c}}function $e(a,n=1,c){var t,s;I||(I=document.createElement("textarea"),((t=a.parentNode)!=null?t:document.body).appendChild(I));const{paddingSize:u,borderSize:d,boxSizing:r,contextStyle:v}=zt(a);v.forEach(([x,b])=>I?.style.setProperty(x,b)),Object.entries(It).forEach(([x,b])=>I?.style.setProperty(x,b,"important")),I.value=a.value||a.placeholder||"";let p=I.scrollHeight;const w={};r==="border-box"?p=p+d:r==="content-box"&&(p=p-u),I.value="";const y=I.scrollHeight-u;if(Pe(n)){let x=y*n;r==="border-box"&&(x=x+u+d),p=Math.max(x,p),w.minHeight=`${x}px`}if(Pe(c)){let x=y*c;r==="border-box"&&(x=x+u+d),p=Math.min(x,p)}return w.height=`${p}px`,(s=I.parentNode)==null||s.removeChild(I),I=void 0,w}const Nt=a=>a,Pt=at({id:{type:String,default:void 0},size:nt,disabled:{type:Boolean,default:void 0},modelValue:{type:T([String,Number,Object]),default:""},modelModifiers:{type:T(Object),default:()=>({})},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:T(String),default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:T([Boolean,Object]),default:!1},autocomplete:{type:T(String),default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,clearIcon:{type:fe,default:ht},showPassword:Boolean,showWordLimit:Boolean,wordLimitPosition:{type:String,values:["inside","outside"],default:"inside"},suffixIcon:{type:fe},prefixIcon:{type:fe},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:T([Object,Array,String]),default:()=>Nt({})},autofocus:Boolean,rows:{type:Number,default:2},...vt(["ariaLabel"]),inputmode:{type:T(String),default:void 0},name:String}),Ft={[te]:a=>re(a),input:a=>re(a),change:(a,n)=>re(a)&&(n instanceof Event||n===void 0),focus:a=>a instanceof FocusEvent,blur:a=>a instanceof FocusEvent,clear:()=>!0,mouseleave:a=>a instanceof MouseEvent,mouseenter:a=>a instanceof MouseEvent,keydown:a=>a instanceof Event,compositionstart:a=>a instanceof CompositionEvent,compositionupdate:a=>a instanceof CompositionEvent,compositionend:a=>a instanceof CompositionEvent},kt=["class","style"],Tt=/^on[A-Z]/,Mt=(a={})=>{const{excludeListeners:n=!1,excludeKeys:c}=a,t=m(()=>(c?.value||[]).concat(kt)),s=oe();return s?m(()=>{var u;return st(Object.entries((u=s.proxy)==null?void 0:u.$attrs).filter(([d])=>!t.value.includes(d)&&!(n&&Tt.test(d))))}):m(()=>({}))},Vt=()=>{const a=U(me,void 0),n=U(He,void 0);return{form:a,formItem:n}},Lt=(a,{formItemContext:n,disableIdGeneration:c,disableIdManagement:t})=>{c||(c=F(!1)),t||(t=F(!1));const s=oe(),u=()=>{let p=s?.parent;for(;p;){if(p.type.name==="ElFormItem")return!1;if(p.type.name==="ElLabelWrap")return!0;p=p.parent}return!1},d=F();let r;const v=m(()=>{var p;return!!(!(a.label||a.ariaLabel)&&n&&n.inputIds&&((p=n.inputIds)==null?void 0:p.length)<=1)});return Be(()=>{r=K([Ae(a,"id"),c],([p,w])=>{const y=p??(w?void 0:bt().value);y!==d.value&&(n?.removeInputId&&!u()&&(d.value&&n.removeInputId(d.value),!t?.value&&!w&&y&&n.addInputId(y)),d.value=y)},{immediate:!0})}),lt(()=>{r&&r(),n?.removeInputId&&d.value&&n.removeInputId(d.value)}),{isLabeledByFormItem:v,inputId:d}},De=a=>{const n=oe();return m(()=>{var c,t;return(t=(c=n?.proxy)==null?void 0:c.$props)==null?void 0:t[a]})},Rt=(a,n={})=>{const c=F(void 0),t=n.prop?c:De("size"),s=n.global?c:it(),u=n.form?{size:void 0}:U(me,void 0),d=n.formItem?{size:void 0}:U(He,void 0);return m(()=>t.value||o(a)||d?.size||u?.size||s.value||"")},Ot=a=>{const n=De("disabled"),c=U(me,void 0);return m(()=>{var t,s,u;return(u=(s=(t=n.value)!=null?t:o(a))!=null?s:c?.disabled)!=null?u:!1})};function $t(a,{disabled:n,beforeFocus:c,afterFocus:t,beforeBlur:s,afterBlur:u}={}){const d=oe(),{emit:r}=d,v=ee(),p=F(!1),w=b=>{const S=Fe(c)?c(b):!1;o(n)||p.value||S||(p.value=!0,r("focus",b),t?.())},y=b=>{var S;const i=Fe(s)?s(b):!1;o(n)||b.relatedTarget&&((S=v.value)!=null&&S.contains(b.relatedTarget))||i||(p.value=!1,r("blur",b),u?.())},x=b=>{var S,i;o(n)||gt(b.target)||(S=v.value)!=null&&S.contains(document.activeElement)&&v.value!==document.activeElement||(i=a.value)==null||i.focus()};return K([v,()=>o(n)],([b,S])=>{b&&(S?b.removeAttribute("tabindex"):b.setAttribute("tabindex","-1"))}),pe(v,"focus",w,!0),pe(v,"blur",y,!0),pe(v,"click",x,!0),{isFocused:p,wrapperRef:v,handleFocus:w,handleBlur:y}}const Bt=a=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(a);function At({afterComposition:a,emit:n}){const c=F(!1),t=r=>{n?.("compositionstart",r),c.value=!0},s=r=>{var v;n?.("compositionupdate",r);const p=(v=r.target)==null?void 0:v.value,w=p[p.length-1]||"";c.value=!Bt(w)},u=r=>{n?.("compositionend",r),c.value&&(c.value=!1,M(()=>a(r)))};return{isComposing:c,handleComposition:r=>{r.type==="compositionend"?u(r):s(r)},handleCompositionStart:t,handleCompositionUpdate:s,handleCompositionEnd:u}}function Ht(a){let n;function c(){if(a.value==null)return;const{selectionStart:s,selectionEnd:u,value:d}=a.value;if(s==null||u==null)return;const r=d.slice(0,Math.max(0,s)),v=d.slice(Math.max(0,u));n={selectionStart:s,selectionEnd:u,value:d,beforeTxt:r,afterTxt:v}}function t(){if(a.value==null||n==null)return;const{value:s}=a.value,{beforeTxt:u,afterTxt:d,selectionStart:r}=n;if(u==null||d==null||r==null)return;let v=s.length;if(s.endsWith(d))v=s.length-d.length;else if(s.startsWith(u))v=u.length;else{const p=u[r-1],w=s.indexOf(p,r-1);w!==-1&&(v=w+1)}a.value.setSelectionRange(v,v)}return[c,t]}const Dt=["id","name","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","inputmode"],jt=["id","name","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role"],Kt="ElInput",Ut=rt({name:Kt,inheritAttrs:!1,__name:"input",props:Pt,emits:Ft,setup(a,{expose:n,emit:c}){const t=a,s=c,u=ut(),d=Mt(),r=dt(),v=m(()=>[t.type==="textarea"?ye.b():i.b(),i.m(b.value),i.is("disabled",S.value),i.is("exceed",We.value),{[i.b("group")]:r.prepend||r.append,[i.m("prefix")]:r.prefix||t.prefixIcon,[i.m("suffix")]:r.suffix||t.suffixIcon||t.clearable||t.showPassword,[i.bm("suffix","password-clear")]:Z.value&&se.value,[i.b("hidden")]:t.type==="hidden"},u.class]),p=m(()=>[i.e("wrapper"),i.is("focus",ne.value)]),{form:w,formItem:y}=Vt(),{inputId:x}=Lt(t,{formItemContext:y}),b=Rt(),S=Ot(),i=ke("input"),ye=ke("textarea"),W=ee(),P=ee(),ae=F(!1),Y=F(!1),he=F(),X=ee(t.inputStyle),C=m(()=>W.value||P.value),{wrapperRef:je,isFocused:ne,handleFocus:be,handleBlur:ge}=$t(C,{disabled:S,afterBlur(){var e;t.validateEvent&&((e=y?.validate)==null||e.call(y,"blur").catch(l=>Re()))}}),we=m(()=>{var e;return(e=w?.statusIcon)!=null?e:!1}),$=m(()=>y?.validateState||""),xe=m(()=>$.value&&xt[$.value]),Ke=m(()=>Y.value?St:Et),Ue=m(()=>[u.style]),Se=m(()=>[t.inputStyle,X.value,{resize:t.resize}]),k=m(()=>ct(t.modelValue)?"":String(t.modelValue)),Z=m(()=>t.clearable&&!S.value&&!t.readonly&&!!k.value&&(ne.value||ae.value)),se=m(()=>t.showPassword&&!S.value&&!!k.value),V=m(()=>t.showWordLimit&&!!t.maxlength&&(t.type==="text"||t.type==="textarea")&&!S.value&&!t.readonly&&!t.showPassword),le=m(()=>k.value.length),We=m(()=>!!V.value&&le.value>Number(t.maxlength)),Ye=m(()=>!!r.suffix||!!t.suffixIcon||Z.value||t.showPassword||V.value||!!$.value&&we.value),Xe=m(()=>!!Object.keys(t.modelModifiers).length),[Ze,Je]=Ht(W);mt(P,e=>{if(qe(),!V.value||t.resize!=="both"&&t.resize!=="horizontal")return;const l=e[0],{width:f}=l.contentRect;he.value={right:`calc(100% - ${f+22-10}px)`}});const B=()=>{const{type:e,autosize:l}=t;if(!(!pt||e!=="textarea"||!P.value))if(l){const f=Ve(l)?l.minRows:void 0,R=Ve(l)?l.maxRows:void 0,A=$e(P.value,f,R);X.value={overflowY:"hidden",...A},M(()=>{P.value.offsetHeight,X.value=A})}else X.value={minHeight:$e(P.value).minHeight}},qe=(e=>{let l=!1;return()=>{var f;if(l||!t.autosize)return;((f=P.value)==null?void 0:f.offsetParent)===null||(setTimeout(e),l=!0)}})(B),L=()=>{const e=C.value,l=t.formatter?t.formatter(k.value):k.value;!e||e.value===l||t.type==="file"||(e.value=l)},Ee=e=>{const{trim:l,number:f}=t.modelModifiers;return l&&(e=e.trim()),f&&(e=`${Oe(e)}`),t.formatter&&t.parser&&(e=t.parser(e)),e},ie=async e=>{if(Ce.value)return;const{lazy:l}=t.modelModifiers;let{value:f}=e.target;if(l){s(ve,f);return}if(f=Ee(f),String(f)===k.value){t.formatter&&L();return}Ze(),s(te,f),s(ve,f),await M(),(t.formatter&&t.parser||!Xe.value)&&L(),Je()},Ie=async e=>{let{value:l}=e.target;l=Ee(l),t.modelModifiers.lazy&&s(te,l),s(Le,l,e),await M(),L()},{isComposing:Ce,handleCompositionStart:J,handleCompositionUpdate:q,handleCompositionEnd:G}=At({emit:s,afterComposition:ie}),Ge=()=>{Y.value=!Y.value},Qe=()=>{var e;return(e=C.value)==null?void 0:e.focus()},_e=()=>{var e;return(e=C.value)==null?void 0:e.blur()},et=e=>{ae.value=!1,s("mouseleave",e)},tt=e=>{ae.value=!0,s("mouseenter",e)},ze=e=>{s("keydown",e)},ot=()=>{var e;(e=C.value)==null||e.select()},Ne=()=>{s(te,""),s(Le,""),s("clear"),s(ve,"")};return K(()=>t.modelValue,()=>{var e;M(()=>B()),t.validateEvent&&((e=y?.validate)==null||e.call(y,"change").catch(l=>Re()))}),K(k,e=>{if(!C.value)return;const{trim:l,number:f}=t.modelModifiers,R=C.value.value,A=(f||t.type==="number")&&!/^0\d/.test(R)?`${Oe(R)}`:R;A!==e&&(document.activeElement===C.value&&C.value.type!=="range"&&l&&A.trim()===e||L())}),K(()=>t.type,async()=>{await M(),L(),B()}),Be(()=>{!t.formatter&&t.parser,L(),M(B)}),n({input:W,textarea:P,ref:C,textareaStyle:Se,autosize:Ae(t,"autosize"),isComposing:Ce,focus:Qe,blur:_e,select:ot,clear:Ne,resizeTextarea:B}),(e,l)=>(h(),z("div",{class:E([v.value,{[o(i).bm("group","append")]:e.$slots.append,[o(i).bm("group","prepend")]:e.$slots.prepend}]),style:Me(Ue.value),onMouseenter:tt,onMouseleave:et},[g(" input "),e.type!=="textarea"?(h(),z(ue,{key:0},[g(" prepend slot "),e.$slots.prepend?(h(),z("div",{key:0,class:E(o(i).be("group","prepend"))},[Q(e.$slots,"prepend")],2)):g("v-if",!0),O("div",{ref_key:"wrapperRef",ref:je,class:E(p.value)},[g(" prefix slot "),e.$slots.prefix||e.prefixIcon?(h(),z("span",{key:0,class:E(o(i).e("prefix"))},[O("span",{class:E(o(i).e("prefix-inner"))},[Q(e.$slots,"prefix"),e.prefixIcon?(h(),N(o(j),{key:0,class:E(o(i).e("icon"))},{default:H(()=>[(h(),N(D(e.prefixIcon)))]),_:1},8,["class"])):g("v-if",!0)],2)],2)):g("v-if",!0),O("input",Te({id:o(x),ref_key:"input",ref:W,class:o(i).e("inner")},o(d),{name:e.name,minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?Y.value?"text":"password":e.type,disabled:o(S),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,role:e.containerRole,inputmode:e.inputmode,onCompositionstart:l[0]||(l[0]=(...f)=>o(J)&&o(J)(...f)),onCompositionupdate:l[1]||(l[1]=(...f)=>o(q)&&o(q)(...f)),onCompositionend:l[2]||(l[2]=(...f)=>o(G)&&o(G)(...f)),onInput:ie,onChange:Ie,onKeydown:ze}),null,16,Dt),g(" suffix slot "),Ye.value?(h(),z("span",{key:1,class:E(o(i).e("suffix"))},[O("span",{class:E(o(i).e("suffix-inner"))},[!Z.value||!se.value||!V.value?(h(),z(ue,{key:0},[Q(e.$slots,"suffix"),e.suffixIcon?(h(),N(o(j),{key:0,class:E(o(i).e("icon"))},{default:H(()=>[(h(),N(D(e.suffixIcon)))]),_:1},8,["class"])):g("v-if",!0)],64)):g("v-if",!0),Z.value?(h(),N(o(j),{key:1,class:E([o(i).e("icon"),o(i).e("clear")]),onMousedown:de(o(ce),["prevent"]),onClick:Ne},{default:H(()=>[(h(),N(D(e.clearIcon)))]),_:1},8,["class","onMousedown"])):g("v-if",!0),se.value?(h(),N(o(j),{key:2,class:E([o(i).e("icon"),o(i).e("password")]),onClick:Ge,onMousedown:de(o(ce),["prevent"]),onMouseup:de(o(ce),["prevent"])},{default:H(()=>[(h(),N(D(Ke.value)))]),_:1},8,["class","onMousedown","onMouseup"])):g("v-if",!0),V.value?(h(),z("span",{key:3,class:E([o(i).e("count"),o(i).is("outside",e.wordLimitPosition==="outside")])},[O("span",{class:E(o(i).e("count-inner"))},_(le.value)+" / "+_(e.maxlength),3)],2)):g("v-if",!0),$.value&&xe.value&&we.value?(h(),N(o(j),{key:4,class:E([o(i).e("icon"),o(i).e("validateIcon"),o(i).is("loading",$.value==="validating")])},{default:H(()=>[(h(),N(D(xe.value)))]),_:1},8,["class"])):g("v-if",!0)],2)],2)):g("v-if",!0)],2),g(" append slot "),e.$slots.append?(h(),z("div",{key:1,class:E(o(i).be("group","append"))},[Q(e.$slots,"append")],2)):g("v-if",!0)],64)):(h(),z(ue,{key:1},[g(" textarea "),O("textarea",Te({id:o(x),ref_key:"textarea",ref:P,class:[o(ye).e("inner"),o(i).is("focus",o(ne))]},o(d),{name:e.name,minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:o(S),readonly:e.readonly,autocomplete:e.autocomplete,style:Se.value,"aria-label":e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,rows:e.rows,role:e.containerRole,onCompositionstart:l[3]||(l[3]=(...f)=>o(J)&&o(J)(...f)),onCompositionupdate:l[4]||(l[4]=(...f)=>o(q)&&o(q)(...f)),onCompositionend:l[5]||(l[5]=(...f)=>o(G)&&o(G)(...f)),onInput:ie,onFocus:l[6]||(l[6]=(...f)=>o(be)&&o(be)(...f)),onBlur:l[7]||(l[7]=(...f)=>o(ge)&&o(ge)(...f)),onChange:Ie,onKeydown:ze}),null,16,jt),V.value?(h(),z("span",{key:0,style:Me(he.value),class:E([o(i).e("count"),o(i).is("outside",e.wordLimitPosition==="outside")])},_(le.value)+" / "+_(e.maxlength),7)):g("v-if",!0)],64))],38))}});var Wt=wt(Ut,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const qt=ft(Wt);export{qt as E,Vt as a,Lt as b,Mt as c,$t as d,Ot as e,At as f,Nt as m,Rt as u};
