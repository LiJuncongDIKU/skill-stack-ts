import{a4 as h,b3 as $,Y as Ve,a5 as ee,am as ye,d as P,aj as Ee,$ as Se,q as _,r as Ie,c as y,ar as R,a6 as O,k as oe,aa as we,b as g,o as p,w as te,p as ne,h as M,u as r,at as ae,n as j,j as k,m as A,l as C,bf as xe,a2 as ke,as as Ae,ad as Ce,a3 as K,g as V,F as ce,e as de,_ as J,t as F,f as $e}from"./en_index.DQbeLCK-.js";import{a as Me,u as Fe,e as Pe,E as De}from"./ck_el-input.Bk6Qi7k3.js";import{v as le,M as re}from"./ck_mock.YZISK0us.js";import{U as w,S as L,C as me,a as Te,_ as He,q as Be,W as ze,E as se,p as Re,X as Ke,g as ie,t as Le}from"./ck_aria.CfoWlX2e.js";import{g as Oe,a as Ue,E as ue}from"./ck_event.Bq7m60JB.js";import"./ck__commonjsHelpers.CqkleIqs.js";const Ge=Ve({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.MAX_SAFE_INTEGER},min:{type:Number,default:Number.MIN_SAFE_INTEGER},modelValue:{type:[Number,null]},readonly:Boolean,disabled:Boolean,size:ye,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:s=>s===null||h(s)||["min","max"].includes(s),default:null},name:String,placeholder:String,precision:{type:Number,validator:s=>s>=0&&s===Number.parseInt(`${s}`,10)},validateEvent:{type:Boolean,default:!0},...Te(["ariaLabel"]),inputmode:{type:ee(String),default:void 0},align:{type:ee(String),default:"center"},disabledScientific:Boolean}),qe={[me]:(s,u)=>u!==s,blur:s=>s instanceof FocusEvent,focus:s=>s instanceof FocusEvent,[L]:s=>h(s)||$(s),[w]:s=>h(s)||$(s)},We=P({name:"ElInputNumber"}),Xe=P({...We,props:Ge,emits:qe,setup(s,{expose:u,emit:o}){const n=s,{t:v}=Ee(),i=Se("input-number"),f=_(),a=Ie({currentValue:n.modelValue,userInput:null}),{formItem:N}=Me(),D=y(()=>h(n.modelValue)&&n.modelValue<=n.min),T=y(()=>h(n.modelValue)&&n.modelValue>=n.max),I=y(()=>{const e=Q(n.step);return R(n.precision)?Math.max(Q(n.modelValue),e):(e>n.precision,n.precision)}),E=y(()=>n.controls&&n.controlsPosition==="right"),U=Fe(),S=Pe(),x=y(()=>{if(a.userInput!==null)return a.userInput;let e=a.currentValue;if($(e))return"";if(h(e)){if(Number.isNaN(e))return"";R(n.precision)||(e=e.toFixed(n.precision))}return e}),G=(e,t)=>{if(R(t)&&(t=I.value),t===0)return Math.round(e);let l=String(e);const c=l.indexOf(".");if(c===-1||!l.replace(".","").split("")[c+t])return e;const B=l.length;return l.charAt(B-1)==="5"&&(l=`${l.slice(0,Math.max(0,B-1))}6`),Number.parseFloat(Number(l).toFixed(t))},Q=e=>{if($(e))return 0;const t=e.toString(),l=t.indexOf(".");let c=0;return l!==-1&&(c=t.length-l-1),c},Z=(e,t=1)=>h(e)?e>=Number.MAX_SAFE_INTEGER&&t===1||e<=Number.MIN_SAFE_INTEGER&&t===-1?e:G(e+n.step*t):a.currentValue,pe=e=>{const t=Oe(e),l=Ue(e);if(n.disabledScientific&&["e","E"].includes(l)){e.preventDefault();return}switch(t){case ue.up:{e.preventDefault(),q();break}case ue.down:{e.preventDefault(),W();break}}},q=()=>{if(n.readonly||S.value||T.value)return;const e=Number(x.value)||0,t=Z(e);H(t),o(L,a.currentValue),Y()},W=()=>{if(n.readonly||S.value||D.value)return;const e=Number(x.value)||0,t=Z(e,-1);H(t),o(L,a.currentValue),Y()},X=(e,t)=>{const{max:l,min:c,step:d,precision:b,stepStrictly:B,valueOnClear:z}=n;l<c&&Le("InputNumber","min should not be greater than max.");let m=Number(e);if($(e)||Number.isNaN(m))return null;if(e===""){if(z===null)return null;m=Ae(z)?{min:c,max:l}[z]:z}return B&&(m=G(Math.round(m/d)*d,b),m!==e&&t&&o(w,m)),R(b)||(m=G(m,b)),(m>l||m<c)&&(m=m>l?l:c,t&&o(w,m)),m},H=(e,t=!0)=>{var l;const c=a.currentValue,d=X(e);if(!t){o(w,d);return}c===d&&e||(a.userInput=null,o(w,d),c!==d&&o(me,d,c),n.validateEvent&&((l=N?.validate)==null||l.call(N,"change").catch(b=>ie())),a.currentValue=d)},fe=e=>{a.userInput=e;const t=e===""?null:Number(e);o(L,t),H(t,!1)},ve=e=>{const t=e!==""?Number(e):"";(h(t)&&!Number.isNaN(t)||e==="")&&H(t),Y(),a.userInput=null},be=()=>{var e,t;(t=(e=f.value)==null?void 0:e.focus)==null||t.call(e)},he=()=>{var e,t;(t=(e=f.value)==null?void 0:e.blur)==null||t.call(e)},ge=e=>{o("focus",e)},Ne=e=>{var t,l;a.userInput=null,a.currentValue===null&&((t=f.value)!=null&&t.input)&&(f.value.input.value=""),o("blur",e),n.validateEvent&&((l=N?.validate)==null||l.call(N,"blur").catch(c=>ie()))},Y=()=>{a.currentValue!==n.modelValue&&(a.currentValue=n.modelValue)},_e=e=>{document.activeElement===e.target&&e.preventDefault()};return O(()=>n.modelValue,(e,t)=>{const l=X(e,!0);a.userInput===null&&l!==t&&(a.currentValue=l)},{immediate:!0}),O(()=>n.precision,()=>{a.currentValue=X(n.modelValue)}),oe(()=>{var e;const{min:t,max:l,modelValue:c}=n,d=(e=f.value)==null?void 0:e.input;if(d.setAttribute("role","spinbutton"),Number.isFinite(l)?d.setAttribute("aria-valuemax",String(l)):d.removeAttribute("aria-valuemax"),Number.isFinite(t)?d.setAttribute("aria-valuemin",String(t)):d.removeAttribute("aria-valuemin"),d.setAttribute("aria-valuenow",a.currentValue||a.currentValue===0?String(a.currentValue):""),d.setAttribute("aria-disabled",String(S.value)),!h(c)&&c!=null){let b=Number(c);Number.isNaN(b)&&(b=null),o(w,b)}d.addEventListener("wheel",_e,{passive:!1})}),we(()=>{var e,t;const l=(e=f.value)==null?void 0:e.input;l?.setAttribute("aria-valuenow",`${(t=a.currentValue)!=null?t:""}`)}),u({focus:be,blur:he}),(e,t)=>(p(),g("div",{class:j([r(i).b(),r(i).m(r(U)),r(i).is("disabled",r(S)),r(i).is("without-controls",!e.controls),r(i).is("controls-right",r(E)),r(i).is(e.align,!!e.align)]),onDragstart:ke(()=>{},["prevent"])},[e.controls?te((p(),g("span",{key:0,role:"button","aria-label":r(v)("el.inputNumber.decrease"),class:j([r(i).e("decrease"),r(i).is("disabled",r(D))]),onKeydown:ae(W,["enter"])},[k(e.$slots,"decrease-icon",{},()=>[M(r(se),null,{default:A(()=>[r(E)?(p(),C(r(Be),{key:0})):(p(),C(r(ze),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[r(le),W]]):ne("v-if",!0),e.controls?te((p(),g("span",{key:1,role:"button","aria-label":r(v)("el.inputNumber.increase"),class:j([r(i).e("increase"),r(i).is("disabled",r(T))]),onKeydown:ae(q,["enter"])},[k(e.$slots,"increase-icon",{},()=>[M(r(se),null,{default:A(()=>[r(E)?(p(),C(r(Re),{key:0})):(p(),C(r(Ke),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[r(le),q]]):ne("v-if",!0),M(r(De),{id:e.id,ref_key:"input",ref:f,type:"number",step:e.step,"model-value":r(x),placeholder:e.placeholder,readonly:e.readonly,disabled:r(S),size:r(U),max:e.max,min:e.min,name:e.name,"aria-label":e.ariaLabel,"validate-event":!1,inputmode:e.inputmode,onKeyup:pe,onBlur:Ne,onFocus:ge,onInput:fe,onChange:ve},xe({_:2},[e.$slots.prefix?{name:"prefix",fn:A(()=>[k(e.$slots,"prefix")])}:void 0,e.$slots.suffix?{name:"suffix",fn:A(()=>[k(e.$slots,"suffix")])}:void 0]),1032,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","inputmode"])],42,["onDragstart"]))}});var Ye=He(Xe,[["__file","input-number.vue"]]);const je=Ce(Ye),Je=P({__name:"VirtualScroll",props:{items:{type:Array,required:!0,default:()=>[]},itemHeight:{type:Number,default:50},containerHeight:{type:String,default:"500px"},preloadCount:{type:Number,default:5}},setup(s){const u=s,o=_(null),n=_(0),v=_(0),i=_(0),f=_(0),a=_(0),N=y(()=>u.items.length*u.itemHeight),D=y(()=>u.items.slice(i.value,f.value)),T=()=>{o.value&&(n.value=o.value.scrollTop,I())},I=()=>{if(!o.value)return;const E=o.value.clientHeight;v.value=Math.ceil(E/u.itemHeight),i.value=Math.max(0,Math.floor(n.value/u.itemHeight)-u.preloadCount),f.value=Math.min(u.items.length,i.value+v.value+2*u.preloadCount),a.value=i.value*u.itemHeight};return oe(()=>{I()}),O(()=>u.items.length,()=>{I()}),O(()=>o.value?.clientHeight,()=>{I()}),(E,U)=>(p(),g("div",{class:"virtual-scroll-container",ref_key:"containerRef",ref:o,onScroll:T,style:K({height:s.containerHeight})},[V("div",{class:"virtual-scroll-placeholder",style:K({height:`${N.value}px`})},null,4),V("div",{class:"virtual-scroll-content",style:K({transform:`translateY(${a.value}px)`})},[(p(!0),g(ce,null,de(D.value,(S,x)=>(p(),g("div",{key:x,style:K({height:`${s.itemHeight}px`}),class:"virtual-scroll-item"},[k(E.$slots,"default",{item:S},void 0,!0)],4))),128))],4)],36))}}),Qe=J(Je,[["__scopeId","data-v-3bd706a5"]]),Ze={class:"outer-cont"},et=P({__name:"ScrollItem",props:{index:{},label:{},desc:{}},setup(s){const u=s;return(o,n)=>(p(),g("div",Ze,F(u.index)+" |"+F(u.label)+" |"+F(u.desc),1))}}),tt=J(et,[["__scopeId","data-v-2ff2ee03"]]),nt={class:"bench-grid"},at={class:"left"},lt={class:"scroll-header"},rt={class:"scroll-wrap"},st={class:"right"},it={class:"item"},ut=P({__name:"Scroll",setup(s){const u=_(10),o=y(()=>{const v={};return v[`list|${u.value}`]=[{label:"@cname(3,4)",desc:"mock:@cword(5,10)","index|+1":1}],re.mock(v).list}),n=re.mock({"list|10000":[{label:"@cname",desc:"mock:@cword(5,10)"}]}).list.map((v,i)=>({...v,index:i+1}));return console.log(n),(v,i)=>{const f=je;return p(),g("div",nt,[V("div",at,[V("div",lt,[i[1]||(i[1]=V("div",{class:"title"},"直接渲染",-1)),M(f,{modelValue:u.value,"onUpdate:modelValue":i[0]||(i[0]=a=>u.value=a),min:1,step:100},null,8,["modelValue"])]),V("div",rt,[(p(!0),g(ce,null,de(o.value,a=>(p(),C(tt,{key:a.index,index:a.index,desc:a.desc,label:a.label},null,8,["index","desc","label"]))),128))])]),V("div",st,[i[2]||(i[2]=$e(" 虚拟滚动 ",-1)),M(Qe,{items:r(n)},{default:A(a=>[V("div",it,F(a.item.index)+":"+F(a.item.label),1)]),_:1},8,["items"])])])}}}),vt=J(ut,[["__scopeId","data-v-20d04ed8"]]);export{vt as default};
